# Java의 메모리 관리: 힙, 스택, 그리고 스트링 풀

Java는 메모리를 효율적으로 관리하기 위해 데이터를 **힙(Heap)**, **스택(Stack)**, 그리고 **스트링 풀(String Pool)**로 구분하여 관리합니다. 이 구조는 성능 최적화와 안정성을 보장합니다.

---

## 메모리 구조 설명

### 1. **스택(Stack)**
- 메서드 호출과 관련된 데이터를 저장하는 메모리 영역으로, **지역 변수**, **매개변수**, **메서드 호출 정보(스택 프레임)**를 저장합니다.
- 메서드가 호출되면 스택 프레임이 생성되고, 메서드가 종료되면 해당 프레임은 스택에서 제거됩니다.
- 접근 속도가 빠르지만, 크기가 제한적입니다.

### 2. **힙(Heap)**
- 동적으로 생성된 **객체와 배열**이 저장되는 메모리 영역입니다.
- GC(Garbage Collector)가 관리하며, 더 이상 참조되지 않는 객체를 자동으로 해제합니다.
- 크기가 크고 동적으로 확장할 수 있습니다.

### 3. **스트링 풀(String Pool)**
- 힙의 특별한 영역으로, **String 리터럴**을 효율적으로 관리합니다.
- 동일한 문자열 리터럴은 중복 저장되지 않고 공유됩니다.
- `new String()`을 사용하면 힙에 새 객체를 생성합니다.

---

## 메모리 구조 요약

| **메모리 영역** | **저장 데이터**                     | **특징**                                                    |
|-----------------|-----------------------------------|------------------------------------------------------------|
| **스택**        | 지역 변수, 매개변수, 메서드 호출 정보 | 빠른 접근 속도, 메서드 실행 중에만 유지, 크기 제한적            |
| **힙**         | 동적 생성된 객체, 배열              | 크기가 크고 동적, GC에 의해 관리, 객체는 참조를 통해 접근         |
| **스트링 풀**   | 문자열 리터럴                      | 힙의 특별한 영역, 중복 방지, 메모리 절약                     |

---

## 메모리 구조 설명

```java
public class Main {
    public static void main(String[] args) {
        // 스택: a와 b는 참조 변수로 스택에 저장, 값은 스트링 풀을 참조
        String a = "hello";          // "hello"는 스트링 풀에 저장
        String b = "hello";          // a와 같은 객체를 참조

        // 힙: new String()으로 인해 힙에 새로운 객체 생성
        String c = new String("hello");

        // 스택: 지역 변수 x, y, z 저장
        int x = 5;                   // 스택에 저장
        int y = 10;                  // 스택에 저장
        int z = x + y;               // 스택에 저장

        // 힙: Person 객체는 힙에 저장, 참조는 스택에 저장
        Person person = new Person("John");

        // 메서드 호출
        person.sayHello();
    }
}

class Person {
    String name; // 힙에 저장

    Person(String name) {
        this.name = name; // 힙에 저장된 객체의 필드에 값 저장
    }

    void sayHello() {
        // 스택: 지역 변수 greeting 저장
        String greeting = "Hi, " + name; // greeting과 "Hi, "는 스트링 풀에 저장
        System.out.println(greeting);    // 출력
    }
}
